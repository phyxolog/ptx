webpackJsonp([3],{122:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(a(0)),i=p(a(7)),s=p(a(9)),l=a(6),r=a(4),o=p(a(17));a(131);var m,d,c,u=p(a(18)),f=p(a(5)),g=p(a(28));function p(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function x(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=(0,r.observer)((c=function(e,t,a,n,i){var s={};return Object.keys(n).forEach(function(e){s[e]=n[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=a.slice().reverse().reduce(function(a,n){return n(e,t,a)||a},s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}((d=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return function(e,t,a,n){a&&Object.defineProperty(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(n):void 0})}(a=function(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?E(e):t}(this,(e=w(t)).call.apply(e,[this].concat(i))),"mails",c,E(E(a))),a.state={error:!1,mails:void 0,showed:void 0},a.fetchMails=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise(function(t){g.default.mails({page_size:20,page:e}).then(function(e){t(e)}).catch(function(e){return a.setState({error:!0})})})},a.fetchFirstPage=function(){a.setState({error:!1,mails:void 0}),a.fetchMails().then(function(e){a.setMails(e,!1)})},a.setMails=function(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){b(e,t,a[t])})}return e}({},e,{entries:h(a.state.mails.entries).concat(h(e.entries))});a.setState({loading:!1,error:!1,mails:t})}else a.setState({loading:!1,error:!1,mails:e})},a.nextPage=function(){a.setState({loading:!0}),a.fetchMails(a.state.mails.page_number+1).then(function(e){a.setMails(e)})},a.setShowed=function(e){a.setState({showed:e})},a.hideShowed=function(){a.setState({showed:void 0})},a.toggleShowed=function(e){a.state.showed!=e?a.setShowed(e):a.hideShowed()},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,i.default),function(e,t,a){t&&x(e.prototype,t),a&&x(e,a)}(t,[{key:"componentDidMount",value:function(){this.fetchFirstPage()}},{key:"render",value:function(){var e=this,t=f.default.user,a=this.state,i=a.mails,l=a.error;return n.default.createElement("main",{className:"v-mails u-fs u-fade-in"},n.default.createElement(s.default,null,n.default.createElement("title",null,this.b("navbar.mails","..."))),n.default.createElement("h1",null,this.b("navbar.mails","...")),l?n.default.createElement("section",{className:"u-fade-in fscale"},n.default.createElement("p",{className:"u-description"},this.b("mails.error")),n.default.createElement("p",{className:"u-description",style:{marginTop:20}},n.default.createElement("button",{className:"u-default-button gold",onClick:this.fetchFirstPage},this.b("actions.try_again")))):i?n.default.createElement("section",null,0==i.entries.length?n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"u-description u-fade-in fscale"},this.b("ptc.no")," ",o.default.output.pluralizeClear(0,this.b("mails.plural"))),n.default.createElement("div",{className:"u-description",style:{marginTop:20}},n.default.createElement("button",{className:"u-default-button gold",onClick:this.fetchFirstPage},this.b("actions.refresh")))):n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"u-description u-fade-in fscale"},i.entries.length," ",this.b("ptc.of")," ",i.total_entries),n.default.createElement("div",{className:"u-description",style:{marginTop:20}},n.default.createElement("button",{className:"u-default-button gold",onClick:this.fetchFirstPage},this.b("actions.refresh"))),n.default.createElement("div",{className:"u-paper messages u-fade-in fscale"},n.default.createElement("div",{className:"message header"},n.default.createElement("div",{className:"status"}),n.default.createElement("div",{className:"subject"},this.b("mails.subject")),n.default.createElement("div",{className:"recipients"},this.b("mails.recipients")),n.default.createElement("div",{className:"last-opened"},this.b("mails.last_opened")),n.default.createElement("div",{className:"opens-count"},this.b("mails.opens_count"))),i.entries.map(function(a){var i=a.reads,s=0==i.length?null:i[i.length-1].inserted_at,l=e.state.showed==a.id;return n.default.createElement("div",{key:a.id,className:"message ".concat(s?"":"n_a"," ").concat(l?"showed":""," ").concat(e.state.showed&&!l?"opaque":""),onClick:function(){return s&&e.toggleShowed(a.id)}},n.default.createElement("div",{className:"status"},n.default.createElement("img",{src:"/static_office/images/icons/states/".concat(s?"read":"sent",".svg"),alt:"status"})),n.default.createElement("div",{className:"subject"},a.subject?n.default.createElement("strong",null,a.subject):n.default.createElement("span",{className:"u-dimmed"},e.b("mails.no_subject"))),n.default.createElement("div",{className:"recipients"},a.recipients.map(function(e,t){var a=e.split(/[<>]/).filter(function(e){return e}),i=1==a.length?null:a[0],s=a[1]||a[0];return n.default.createElement("div",{className:"recipient",key:t},i&&n.default.createElement("span",{className:"name"},i),i?n.default.createElement(n.default.Fragment,null,"(",n.default.createElement("a",{href:"mailto:".concat(s)},s),")"):n.default.createElement("a",{href:"mailto:".concat(s)},s))})),n.default.createElement("div",{className:"last-opened","data-before":"".concat(e.b("mails.last_opened"),": ")},s?"".concat(o.default.output.formatDate(s,t.timezone_offset),", ").concat(o.default.output.formateTime(s,t.timezone_offset)):n.default.createElement("span",{className:"u-dimmed"},e.b("mails.not_yet"))),n.default.createElement("div",{className:"opens-count","data-before":"".concat(e.b("mails.opens_count"),": ")},o.default.output.pluralize(i.length,e.b("mails.times_plural"))),n.default.createElement("div",{className:"toggle"},s&&n.default.createElement("img",{src:"/static_office/images/icons/k-arrow-down_purple.svg",className:l?"flipped":"",alt:"arr"})),l&&s&&n.default.createElement("ul",{className:"cool-stats u-fade-in"},n.default.createElement("li",{className:"header"},e.b("mails.opens_stats")),i.map(function(t,i){var s=o.default.calc.getTimeDiffedence(t.inserted_at,a.inserted_at),l=o.default.calc.extractTimeSequence(s).map(function(t){return"".concat(o.default.output.pluralize(t.value,e.b("timing.".concat(t.key))))}).join(" ");return n.default.createElement("li",{className:"read",key:t.id,"data-before":"".concat(i+1,". ")},o.default.output.formatDate(t.inserted_at)," ",e.b("mails.at")," ",o.default.output.formateTime(t.inserted_at),"Â  (",e.b("mails.since")," ",l," ",e.b("mails.after_sent"),")")})))}))),i.page_number<i.total_pages&&(this.state.loading?n.default.createElement(u.default,null):n.default.createElement("div",{className:"u-fade-in fscale",style:{textAlign:"center"}},n.default.createElement("button",{className:"u-default-button purple-light",onClick:this.nextPage},this.b("mails.more"))))):n.default.createElement("section",null,n.default.createElement(u.default,null)))}}]),t}()).prototype,"mails",[l.observable],{enumerable:!0,initializer:null}),m=d))||m;t.default=_},131:function(e,t,a){var n=a(132);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(120)(n,i);n.locals&&(e.exports=n.locals)},132:function(e,t,a){(e.exports=a(119)(!1)).push([e.i,'main.v-mails div.messages {\n  padding: 15px;\n  margin: 40px auto;\n  max-width: 1440px; }\n  @media (max-width: 1199px) {\n    main.v-mails div.messages {\n      padding: 10px; } }\n  main.v-mails div.messages div.message {\n    border-bottom: 1px solid rgba(116, 87, 213, 0.12); }\n    main.v-mails div.messages div.message:not(.header) {\n      padding: 5px 0;\n      font-size: 16px;\n      transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1);\n      cursor: pointer; }\n      main.v-mails div.messages div.message:not(.header):not(.showed):not(.n_a):hover {\n        background: rgba(116, 87, 213, 0.06); }\n      main.v-mails div.messages div.message:not(.header).showed {\n        background: rgba(116, 87, 213, 0.06); }\n      main.v-mails div.messages div.message:not(.header).opaque {\n        opacity: .54; }\n      @media (max-width: 1199px) {\n        main.v-mails div.messages div.message:not(.header) {\n          font-size: 14px; } }\n      @media (max-width: 899px) {\n        main.v-mails div.messages div.message:not(.header) {\n          padding: 10px 0; } }\n    main.v-mails div.messages div.message:last-child {\n      border-bottom: none; }\n    main.v-mails div.messages div.message.header {\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      line-height: 40px;\n      color: rgba(116, 87, 213, 0.54); }\n      @media (max-width: 1199px) {\n        main.v-mails div.messages div.message.header {\n          font-size: 12px; } }\n      @media (max-width: 899px) {\n        main.v-mails div.messages div.message.header {\n          display: none; } }\n    main.v-mails div.messages div.message > * {\n      display: inline-block;\n      vertical-align: top;\n      padding: 5px;\n      min-height: 40px;\n      line-height: 30px;\n      text-align: center; }\n      main.v-mails div.messages div.message > *.cool-stats {\n        width: 100%;\n        padding: 0 15px 15px 15px;\n        text-align: left; }\n        @media (max-width: 729px) {\n          main.v-mails div.messages div.message > *.cool-stats {\n            padding: 10px; } }\n        @media (max-width: 729px) {\n          main.v-mails div.messages div.message > *.cool-stats li {\n            line-height: 20px; } }\n        main.v-mails div.messages div.message > *.cool-stats li:before {\n          content: attr(data-before);\n          font-weight: 700; }\n        main.v-mails div.messages div.message > *.cool-stats li.header {\n          color: #7457d5;\n          font-weight: 700; }\n        main.v-mails div.messages div.message > *.cool-stats li:not(.header) {\n          padding: 5px;\n          border-bottom: 1px solid rgba(116, 87, 213, 0.06); }\n          main.v-mails div.messages div.message > *.cool-stats li:not(.header):last-child {\n            border-bottom: none; }\n      main.v-mails div.messages div.message > *.status {\n        width: 40px; }\n        main.v-mails div.messages div.message > *.status img {\n          width: 30px;\n          height: 30px;\n          display: block; }\n      main.v-mails div.messages div.message > *.subject {\n        width: calc((100% - 200px) / 6 * 2);\n        text-align: left;\n        line-height: 20px;\n        padding: 10px 0;\n        padding-left: 15px; }\n        @media (max-width: 1199px) {\n          main.v-mails div.messages div.message > *.subject {\n            padding-left: 5px; } }\n        @media (max-width: 899px) {\n          main.v-mails div.messages div.message > *.subject {\n            width: calc(100% - 40px); } }\n      main.v-mails div.messages div.message > *.recipients {\n        width: calc((100% - 200px) / 6 * 3); }\n        @media (max-width: 899px) {\n          main.v-mails div.messages div.message > *.recipients {\n            text-align: left;\n            width: 100%; } }\n        main.v-mails div.messages div.message > *.recipients div.recipient {\n          line-height: 20px;\n          padding: 5px 0; }\n          main.v-mails div.messages div.message > *.recipients div.recipient a {\n            color: #4132bc; }\n          main.v-mails div.messages div.message > *.recipients div.recipient:after {\n            content: ","; }\n          main.v-mails div.messages div.message > *.recipients div.recipient:last-child:after {\n            content: none; }\n      main.v-mails div.messages div.message > *.last-opened {\n        width: calc((100% - 200px) / 6);\n        line-height: 20px;\n        padding: 10px 0; }\n        @media (max-width: 899px) {\n          main.v-mails div.messages div.message > *.last-opened {\n            width: auto;\n            margin-right: 10px;\n            padding: 5px;\n            min-height: 0; }\n            main.v-mails div.messages div.message > *.last-opened:before {\n              content: attr(data-before);\n              font-weight: 700; } }\n        @media (max-width: 729px) {\n          main.v-mails div.messages div.message > *.last-opened {\n            width: 100%;\n            text-align: left; } }\n      main.v-mails div.messages div.message > *.opens-count {\n        width: 120px; }\n        @media (max-width: 899px) {\n          main.v-mails div.messages div.message > *.opens-count {\n            width: auto;\n            padding: 5px;\n            line-height: 20px;\n            min-height: 0; }\n            main.v-mails div.messages div.message > *.opens-count:before {\n              content: attr(data-before);\n              font-weight: 700; } }\n        @media (max-width: 729px) {\n          main.v-mails div.messages div.message > *.opens-count {\n            width: 100%;\n            text-align: left; } }\n      main.v-mails div.messages div.message > *.toggle {\n        width: 40px;\n        height: 40px; }\n        @media (max-width: 899px) {\n          main.v-mails div.messages div.message > *.toggle {\n            width: 100%;\n            background: rgba(116, 87, 213, 0.03); }\n            main.v-mails div.messages div.message > *.toggle:empty {\n              display: none; } }\n        main.v-mails div.messages div.message > *.toggle img {\n          width: 30px;\n          height: 30px;\n          transition: transform 450ms cubic-bezier(0.23, 1, 0.32, 1);\n          display: block;\n          margin: 0 auto; }\n          main.v-mails div.messages div.message > *.toggle img.flipped {\n            transform: rotateX(180deg); }\n',""])}});